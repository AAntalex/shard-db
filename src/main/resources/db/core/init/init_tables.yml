databaseChangeLog:
  - changeSet:
      id: 'init$001'
      author: Antalex
      changes:
        - createTable:
            tableName: APP_SEQUENCE
            columns:
              - column:
                  name: C_SEQUENCE_NAME
                  type: VARCHAR(40)
                  constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: PK_SEQUENCE_NAME
              - column:
                  name: C_LAST_VALUE
                  type: bigint
              - column:
                  name: C_CACHE_SIZE
                  type: bigint
              - column:
                  name: C_MIN_VALUE
                  type: bigint
              - column:
                  name: C_MAX_VALUE
                  type: bigint
              - column:
                  name: C_CYCLE_FLAG
                  type: boolean
        - createTable:
            tableName: APP_DATABASE
            columns:
              - column:
                  name: C_SHARD_ID
                  type: tinyint
              - column:
                  name: C_MAIN_SHARD
                  type: boolean
              - column:
                  name: C_CLUSTER_ID
                  type: tinyint
              - column:
                  name: C_CLUSTER_NAME
                  type: VARCHAR(128)
              - column:
                  name: C_DEFAULT_CLUSTER
                  type: boolean
              - column:
                  name: C_SEGMENT_NAME
                  type: VARCHAR(128)
              - column:
                  name: C_ACCESSIBLE
                  type: boolean
        - createTable:
            tableName: APP_TRANSACTION
            columns:
              - column:
                  name: C_UUID
                  type: VARCHAR(40)
                  constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: PK_TRANSACTION_UUID
              - column:
                  name: C_EXECUTE_TIME
                  type: timestamp
              - column:
                  name: C_CHUNKS
                  type: bigint
              - column:
                  name: C_ELAPSED_TIME
                  type: bigint
              - column:
                  name: C_ALL_ELAPSED_TIME
                  type: bigint
              - column:
                  name: C_FAILED
                  type: boolean
              - column:
                  name: C_ERROR_TEXT
                  type: VARCHAR(2000)
        - createTable:
            tableName: APP_DML_QUERY
            columns:
              - column:
                  name: C_TRN_UUID
                  type: VARCHAR(40)
                  constraints:
                    foreignKey:
                      referencedColumnNames: UUID
                      referencedTableName: APP_TRANSACTION
                    nullable: false
              - column:
                  name: C_QUERY_ORDER
                  type: int
              - column:
                  name: C_SQL_TEXT
                  type: VARCHAR(2000)
              - column:
                  name: C_ROWS_PROCESSED
                  type: int
              - column:
                  name: C_ELAPSED_TIME
                  type: bigint
        - createIndex:
            columns:
              - column:
                  name: C_TRN_UUID
            indexName: IDX_APP_DML_QUERY_TRN_UUID
            tableName: APP_DML_QUERY
        - createTable:
            tableName: APP_ATTRIBUTE_STORAGE
            columns:
              - column:
                  name: ID
                  type: bigint
                  constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: PK_ATTRIBUTE_STORAGE_ID
              - column:
                  name: SN
                  type: int
              - column:
                  name: ST
                  type: VARCHAR(40)
              - column:
                  name: PREV_ST
                  type: VARCHAR(40)
              - column:
                  name: SHARD_MAP
                  type: bigint
              - column:
                  name: C_ENTITY_ID
                  type: bigint
              - column:
                  name: C_STORAGE_NAME
                  type: VARCHAR(128)
              - column:
                  name: C_DATA
                  type: clob
              - column:
                  name: C_DATA_FORMAT
                  type: VARCHAR(40)
        - createIndex:
            columns:
              - column:
                  name: C_ENTITY_ID
              - column:
                  name: C_STORAGE_NAME
            indexName: IDX_ATTRIBUTE_STORAGE_MAIN
            tableName: APP_ATTRIBUTE_STORAGE
            unique: true
        - createTable:
            tableName: APP_ATTRIBUTE_HISTORY
            columns:
              - column:
                  name: ID
                  type: bigint
                  constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: PK_ATTRIBUTE_HISTORY_ID
              - column:
                  name: SN
                  type: int
              - column:
                  name: ST
                  type: VARCHAR(40)
              - column:
                  name: PREV_ST
                  type: VARCHAR(40)
              - column:
                  name: SHARD_MAP
                  type: bigint
              - column:
                  name: C_ENTITY_ID
                  type: bigint
              - column:
                  name: C_ATTRIBUTE_NAME
                  type: VARCHAR(128)
              - column:
                  name: C_VALUE
                  type: VARCHAR(2000)
              - column:
                  name: C_TIME
                  type: timestamp
        - createIndex:
            columns:
              - column:
                  name: C_ENTITY_ID
              - column:
                  name: C_ATTRIBUTE_NAME
              - column:
                  name: C_TIME
            indexName: IDX_ATTRIBUTE_HISTORY_MAIN
            tableName: APP_ATTRIBUTE_HISTORY